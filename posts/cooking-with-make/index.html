<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-gb lang=en-gb><head><script defer language=javascript type=text/javascript src=/blog/js/bundle.min.9b6875a1f10d03f9618672bc7be9caa9c49b7346b7641d7d0638bf48545d8bd2.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/blog/favicon.ico><title itemprop=name>gpk blog - Cooking with Make</title><meta property="og:title" content="gpk blog - Cooking with Make"><meta name=twitter:title content="gpk blog - Cooking with Make"><meta itemprop=name content="gpk blog - Cooking with Make"><meta name=application-name content="gpk blog - Cooking with Make"><meta property="og:site_name" content><meta name=description content><meta itemprop=description content><meta property="og:description" content><meta name=twitter:description content><base href=https://georgek.github.io/blog/posts/cooking-with-make/><link rel=canonical href=https://georgek.github.io/blog/posts/cooking-with-make/ itemprop=url><meta name=url content="https://georgek.github.io/blog/posts/cooking-with-make/"><meta name=twitter:url content="https://georgek.github.io/blog/posts/cooking-with-make/"><meta property="og:url" content="https://georgek.github.io/blog/posts/cooking-with-make/"><meta property="og:updated_time" content="3008-03-12T80:00:23Z"><link rel=sitemap type=application/xml title=Sitemap href=https://georgek.github.io/blog/sitemap.xml><meta name=robots content="index,follow"><meta name=googlebot content="index,follow"><meta name=twitter:site content><meta name=twitter:creator content><meta property="fb:admins" content><meta name=apple-mobile-web-app-title content><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta property="og:type" content="article"><meta property="article:publisher" content><meta property="og:article:published_time" content="3008-03-12T80:00:23Z"><meta property="article:published_time" content="3008-03-12T80:00:23Z"><meta property="og:article:author" content="George Kettleborough"><meta property="article:author" content="George Kettleborough"><meta name=author content="George Kettleborough"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Cooking with Make","author":{"@type":"Person","name":"https:\/\/github.com\/georgek"},"datePublished":"2023-08-03","description":"","wordCount":"864","mainEntityOfPage":"True","dateModified":"2023-08-03","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"","logo":{"@type":"imageObject","url":"\/blog\/favicon.ico"}}}</script><meta name=generator content="Hugo 0.119.0"><link type=text/css rel=stylesheet href=/blog/css/bundle.min.148b62a37afd1df75b5847609e06f96f7fdef0b02bde318a1ece0b4b3c5e6cef.css><style>body{--sidebar-bg-color:#202420;--sidebar-img-border-color:#515751;--sidebar-p-color:#909090;--sidebar-h1-color:#FFF;--sidebar-a-color:#FFF;--sidebar-socials-color:#FFF;--text-color:#222;--bkg-color:#FAF9F6;--post-title-color:#303030;--list-color:#3a3a3a;--link-color:#268bd2;--date-color:#515151;--table-border-color:#E5E5E5;--table-stripe-color:#F9F9F9;--code-color:#bf616a;--code-background-color:#E5E5E5;--moon-sun-color:#FFF;--moon-sun-background-color:#515751}body.dark-theme{--text-color:#eee;--bkg-color:#121212;--post-title-color:#DBE2E9;--list-color:#bdbdbd;--link-color:#268bd2;--date-color:#9a9a9a;--table-border-color:#515151;--table-stripe-color:#202020;--code-color:#ff7f7f;--code-background-color:#393D47}body{background-color:var(--bkg-color)}</style><meta name=google-site-verification content="0kCOfXcz_aAJKh_eZglpQdpUUfE2IqecYZesW3oUOJo"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Lora:ital@0;1&family=Vollkorn:ital,wght@0,800;1,800&display=swap" rel=stylesheet><link rel=stylesheet href=https://georgek.github.io/blog/css/maplibre-gl.731181d400d65a8b09d842f55b70bc4dc11010b15b8549e2c65a69d233fbdd2e.css><script defer src=https://georgek.github.io/blog/js/mapbundle.min.6922ed83aed1a2d930c2df30852115f7302fb59346ee9b5d768ce2f767c8c499.js integrity="sha256-aSLtg67Rotkwwt8whSEV9zAvtZNG7ptddozi92fIxJk="></script></head><body><div class=wrapper><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://georgek.github.io/blog/ class=brand-image><img src=/blog/android-chrome-192x192.png alt="brand image"></a><h1 class=brand><a href=https://georgek.github.io/blog/><h1>gpk blog</h1></a></h1><p class=lead>My ramblings about emacs, the internet and everything</p><div class=light-dark align=right><button class=btn-light-dark title="Toggle light/dark mode"><svg display="none" class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/></svg><svg display="none" class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentcolor" d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></svg></button></div></div><nav><ul class=sidebar-nav><li class=heading><a href=/blog/categories/>Categories</a></li><li class=heading><a href=/blog/tags/>Tags</a></li></ul></nav><div class=socials><a target=_blank class=social title=GitHub href=https://github.com/georgek><svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2 24 24"><path fill="currentcolor" d="M18.88 1.099C18.147.366 17.265.0 16.233.0H3.746C2.714.0 1.832.366 1.099 1.099.366 1.832.0 2.714.0 3.746v12.487c0 1.032.366 1.914 1.099 2.647.733.733 1.615 1.099 2.647 1.099H6.66c.19.0.333-.007.429-.02a.504.504.0 00.286-.169c.095-.1.143-.245.143-.435l-.007-.885c-.004-.564-.006-1.01-.006-1.34l-.3.052c-.19.035-.43.05-.721.046a5.555 5.555.0 01-.904-.091 2.026 2.026.0 01-.872-.39 1.651 1.651.0 01-.572-.8l-.13-.3a3.25 3.25.0 00-.41-.663c-.186-.243-.375-.407-.566-.494l-.09-.065a.956.956.0 01-.17-.156.723.723.0 01-.117-.182c-.026-.061-.004-.111.065-.15.07-.04.195-.059.378-.059l.26.04c.173.034.388.138.643.311a2.1 2.1.0 01.631.677c.2.355.44.626.722.813.282.186.566.28.852.28.286.0.533-.022.742-.065a2.59 2.59.0 00.585-.196c.078-.58.29-1.028.637-1.34a8.907 8.907.0 01-1.333-.234 5.314 5.314.0 01-1.223-.507 3.5 3.5.0 01-1.047-.872c-.277-.347-.505-.802-.683-1.365-.177-.564-.266-1.215-.266-1.952.0-1.049.342-1.942 1.027-2.68-.32-.788-.29-1.673.091-2.652.252-.079.625-.02 1.119.175.494.195.856.362 1.086.5.23.14.414.257.553.352a9.233 9.233.0 012.497-.338c.859.0 1.691.113 2.498.338l.494-.312a6.997 6.997.0 011.197-.572c.46-.174.81-.221 1.054-.143.39.98.424 1.864.103 2.653.685.737 1.028 1.63 1.028 2.68.0.737-.089 1.39-.267 1.957-.177.568-.407 1.023-.689 1.366a3.65 3.65.0 01-1.053.865c-.42.234-.828.403-1.223.507a8.9 8.9.0 01-1.333.235c.45.39.676 1.005.676 1.846v3.11c0 .147.021.266.065.357a.36.36.0 00.208.189c.096.034.18.056.254.064.074.01.18.013.318.013h2.914c1.032.0 1.914-.366 2.647-1.099.732-.732 1.099-1.615 1.099-2.647V3.746c0-1.032-.367-1.914-1.1-2.647z"/></svg></a><a target=_blank class=social title=Gitlab href=https://gitlab.com/gkettleborough><svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="-2 -2.5 24 24"><path fill="currentcolor" d="M10.006 18.443 6.326 7.118h7.36l-3.68 11.325zm0 0L1.168 7.118h5.158l3.68 11.325zM1.168 7.118l8.838 11.325-9.68-7.032a.762.762.0 01-.276-.852l1.118-3.441zm0 0L3.385.296a.38.38.0 01.724.0l2.217 6.822H1.168zm8.838 11.325 3.68-11.325h5.157l-8.837 11.325zm8.837-11.325 1.119 3.441a.762.762.0 01-.277.852l-9.68 7.032 8.838-11.325zm0 0h-5.157L15.902.296a.38.38.0 01.725.0l2.216 6.822z"/></svg></a><a target=_blank class=social title="RSS Feed" href=https://georgek.github.io/blog//posts/index.xml><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 1280 1280"><g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="currentcolor"><path d="M2295 11929c-284-12-642-45-707-65-17-5-18-63-18-1039 0-569 4-1036 8-1039 5-3 74 6 153 19 510 86 1168 95 1789 25 1348-153 2602-677 3670-1531 385-308 820-744 1126-1129 842-1060 1362-2313 1514-3650 70-621 61-1279-25-1789-13-79-22-148-19-153 3-4 471-8 1039-8h1035l5 23c51 225 85 942 67 1419-23 605-77 1044-198 1617-294 14e2-927 2734-1823 3846-1043 1295-2364 2259-3909 2854-1158 447-2451 656-3707 6e2z"/><path d="M2255 7845c-269-25-620-81-667-106-17-9-18-55-18-899 0-706 3-890 13-890 6 0 66 18 132 41 130 44 288 79 467 105 154 21 577 30 749 15 1207-107 2267-823 2814-1902 166-327 268-637 330-1001 38-227 48-384 42-662-8-348-44-590-126-831-23-66-41-126-41-132 0-10 184-13 890-13 844 0 890 1 899 18 27 50 88 452 110 725 14 162 14 624 1 782-59 703-233 1323-545 1945-481 956-1313 1788-2270 2268-620 310-1239 483-1940 542-165 14-669 10-840-5z"/><path d="M2519 3815c-391-66-725-336-868-703-79-201-96-462-45-677 83-344 338-641 666-774 116-47 205-69 330-80 412-39 811 153 1040 5e2 193 292 240 648 128 981-135 403-492 699-914 757-1e2 14-241 12-337-4z"/></g></svg></a><a target=_blank class=social title=Email href=mailto://kettlegatgmail.com><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1.2em" viewBox="0 0 485.211 485.211"><path fill="currentcolor" d="M301.393 241.631 464.866 424.56H20.332l163.474-182.928 58.801 51.443 58.786-51.444zM462.174 60.651H23.027l219.579 192.142L462.174 60.651zM324.225 221.67l160.986 180.151V80.792L324.225 221.67zM0 80.792v321.029L160.972 221.64.0 80.792z"/></svg></a></div><p class=footnote>Powered by <a target=_blank href=https://gohugo.io>Hugo</a> | Themed with <a target=_blank href=https://github.com/georgek/poison>Poison</a><br></p></div></aside><main class="content container"><div class=post><div class=info><h1 class=post-title><a href=https://georgek.github.io/blog/posts/cooking-with-make/>Cooking with Make</a></h1><time datetime=2023-08-03T00:00:00Z class=post-date>August 3, 2023</time><ul class=tags><li class=tag-cooking><a href=https://georgek.github.io/blog/tags/cooking>cooking</a></li><li class=tag-programming><a href=https://georgek.github.io/blog/tags/programming>programming</a></li><li class=tag-make><a href=https://georgek.github.io/blog/tags/make>make</a></li><li class=tag-makefile><a href=https://georgek.github.io/blog/tags/makefile>makefile</a></li><li class=tag-declarative><a href=https://georgek.github.io/blog/tags/declarative>declarative</a></li></ul></div><p>I cook a lot of food from scratch and it occurred to me one day that the way I
understand and assimilate recipes is very similar to how <code>make</code> works.</p><p>So, in case you don&rsquo;t know, <code>make</code> is a tool used to build executable software from
source code. Building software often involves several steps such as translation,
compilation, linking and bundling. The process required for a particular project is
describe in a <code>Makefile</code> but, here&rsquo;s the thing, it isn&rsquo;t described imperatively, it&rsquo;s
described <em>declaratively</em>.</p><p>Let&rsquo;s look at an example:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span><span style=color:#268bd2>myprogram</span><span style=color:#719e07>:</span> code.c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">2</span><span>      gcc code.c -o myprogram
</span></span></code></pre></div><p>In the example <code>myprogram</code> is a <strong>target</strong> and <code>code.c</code> is a <strong>prerequisite</strong>. The target
is what <code>make</code> is going to, well, make. The prerequisite is what is required before we
can make it. In this case, the prerequisite is source code, so is always present and
satisfied.</p><p>The second line tells make <em>how</em> to make the target from the prerequisite (OK, this bit
is imperative, but we have to do <em>something</em>). In this case, we run a C compiler.</p><p>In this second example, more than one step is required to build the target:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span><span style=color:#268bd2>myprogram</span><span style=color:#719e07>:</span> module.o
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">2</span><span>      gcc module.o -o myprogram
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">4</span><span><span style=color:#268bd2>module.o</span><span style=color:#719e07>:</span> module.c
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">5</span><span>      gcc -c module.c -o module.o
</span></span></code></pre></div><p>Now we first require <code>module.o</code> and, in case it&rsquo;s not already present, we show how to
make <code>module.o</code> too which requires <code>module.c</code>, the source code.</p><h2 id=making-food>Making food</h2><p>So what does a food recipe look like in a <code>Makefile</code>? Here&rsquo;s how to make a basic
<a href=https://en.wikipedia.org/wiki/B%C3%A9chamel_sauce target=_blank>béchamel sauce</a>:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span><span style=color:#268bd2>béchamel</span><span style=color:#719e07>:</span> milk roux
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">2</span><span>      Gradually incorporate milk into roux, whisking continuously
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">4</span><span><span style=color:#268bd2>roux</span><span style=color:#719e07>:</span> butter flour
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">5</span><span>      Combine equal parts melted butter and flour into smooth paste
</span></span></code></pre></div><p>We could easily extend this file to include higher-level targets, like a <a href=https://en.wikipedia.org/wiki/Mornay_sauce target=_blank>Mornay sauce</a>:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span><span style=color:#268bd2>mornay</span><span style=color:#719e07>:</span> béchamel grated-cheese
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">2</span><span>      Add grated cheese to warm sauce
</span></span></code></pre></div><p>More complex recipes are then natural:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span><span style=color:#268bd2>cauliflower-cheese</span><span style=color:#719e07>:</span> mornay boiled-cauliflower
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">2</span><span>      Combine sauce and boiled cauliflower
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">4</span><span><span style=color:#268bd2>boilded-cauliflower</span><span style=color:#719e07>:</span> cauliflower
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">5</span><span>      Separate cauliflower and boil in salted water
</span></span></code></pre></div><h2 id=implicit-rules>Implicit rules</h2><p>A perhaps lesser-known feature of <code>make</code> is that it contains implicit rules. That is,
<code>make</code> already knows how to make some things, mostly around C compilation. These aren&rsquo;t
as often used today, probably because C is no longer the only language in town.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span><span style=color:#268bd2>module</span><span style=color:#719e07>:</span> module.o
</span></span></code></pre></div><p>This is a valid <code>Makefile</code>. This works because <code>make</code> already knows how to make
<code>module.o</code> from <code>module.c</code> and <code>module</code> from <code>module.o</code>.</p><p>It&rsquo;s the same in the kitchen.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span><span style=color:#268bd2>salsa</span><span style=color:#719e07>:</span> chopped-tomato chopped-onion chopped-chilli
</span></span></code></pre></div><p>Some things don&rsquo;t need to be written as rules. Even if you&rsquo;ve never seen a chilli
before, you already know to get chopped chilli from chilli: you chop it with a knife.
And you already know that to make a sauce from chopped ingredients: you mix them.</p><h2 id=parallel-execution>Parallel execution</h2><p>It&rsquo;s possible to configure <code>make</code> to run jobs in parallel with the <code>-j</code> flag, for
example <code>-j4</code> says run up to four things at once, presumably because you have four CPU
cores available. The following process can be sped up on two cores:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span><span style=color:#268bd2>myprogram</span><span style=color:#719e07>:</span> main.o module.o
</span></span></code></pre></div><p>This is because building <code>main.o</code> and <code>module.o</code> don&rsquo;t depend on each other so can each
be built immediately, as soon as a CPU core is available.</p><p>It&rsquo;s the same in the kitchen. Instead of CPU cores you have burners, ovens, toasters
etc. The following can be executed in parallel given one toaster and one hob:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">1</span><span><span style=color:#268bd2>beans-on-toast</span><span style=color:#719e07>:</span> warm-beans toasted-bread
</span></span></code></pre></div><h2 id=cooking-isn-t-a-script>Cooking isn&rsquo;t a script</h2><p>Before I could cook myself, I used to marvel at the ability of experienced cooks to not
only reproduce a dish from memory, but to seemingly make it up as they went along. To
observe it would appear the script was different every time, but the result was always
the same!</p><p>Now I realise how it&rsquo;s possible: they weren&rsquo;t memorising scripts. That would be far too
hard. Imagine the hundreds of recipes and thousands of steps that would need to be
remembered. Instead, human minds have a remarkable ability to organise this stuff, and
I think it looks like one giant <code>Makefile</code>. We develop implicit rules far more
comprehensive than those of <code>make</code>. Complex recipes are integrated by taking advantage
of the redundancy in multiple layers of existing rules.</p><p>We probably even have a default target or, in English, a favourite comfort dish.</p><p>When reading recipes they are almost always written in imperative style. My approach is
to read it once through and assimilate it into my global <code>Makefile</code> before executing
it. I don&rsquo;t think it&rsquo;s a good idea to execute any recipe from top to bottom without
reading it first. I&rsquo;ll often scribble down a recipe into a pseudo-<code>Makefile</code> format and
take that into the kitchen rather than the original text.</p><p>For the record, I don&rsquo;t actually write down recipes in anything close to a strict
<code>Makefile</code> format but, just for fun, here&rsquo;s what I think a Margherita pizza recipe looks
like:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 1</span><span><span style=color:#268bd2>margherita-pizza</span><span style=color:#719e07>:</span> cooked-margherita-pizza basil
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 2</span><span>      Add basil to top of pizza
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 4</span><span><span style=color:#268bd2>cooked-margherita-pizza</span><span style=color:#719e07>:</span> pizza-base tomato-sauce cheese
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 5</span><span>      Spread sauce on base and top with cheese, bake in oven
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 7</span><span><span style=color:#268bd2>pizza-base</span><span style=color:#719e07>:</span> pizza-dough
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 8</span><span>      Stretch dough into thin circular disc
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">10</span><span><span style=color:#268bd2>pizza-dough</span><span style=color:#719e07>:</span> flour water salt yeast
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">11</span><span>      Combine ingredients, knead, prove <span style=color:#719e07>for</span> many hours
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">13</span><span><span style=color:#268bd2>tomato-sauce</span><span style=color:#719e07>:</span> tomato
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#495050">14</span><span>      Peel and chop tomatoes
</span></span></code></pre></div><hr><div class=footer><a class=previous-post href="https://georgek.github.io/blog/posts/emacs-arduino/?ref=footer"><span style=font-weight:700>« Previous</span><br>Arduino Programming with Emacs</a><div class=next-post><a href="https://georgek.github.io/blog/posts/calibre-rootless-install/?ref=footer"><span style=font-weight:700>Next »</span><br>Install Calibre without Root</a></div></div></div></main><div class=article-toc><div class=toc-wrapper><h4 id=contents></h4><nav id=TableOfContents><ul><li><a href=#making-food>Making food</a></li><li><a href=#implicit-rules>Implicit rules</a></li><li><a href=#parallel-execution>Parallel execution</a></li><li><a href=#cooking-isn-t-a-script>Cooking isn&rsquo;t a script</a></li></ul></nav></div></div></div></body></html>